CREATE TABLE users (
	id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	firstName varchar(255) NOT NULL,
	lastName varchar(255) NOT NULL,
	phone varchar(32) NOT NULL,
	email varchar(64) NOT NULL,
	password varchar(64) NOT NULL,
	active SMALLINT NOT NULL DEFAULT 0,
	createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE products (
	id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	userId int NOT NULL,
	name varchar(255) NOT NULL,
	price float NOT NULL,
	active SMALLINT NOT NULL DEFAULT 0,
	createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	FOREIGN KEY (userId) REFERENCES users(id)
);

CREATE TABLE clients (
	id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	userId int NOT NULL,
	name varchar(255) NOT NULL,
	phone varchar(32),
	email varchar(255),
	active SMALLINT NOT NULL DEFAULT 0,
	createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	FOREIGN KEY (userId) REFERENCES users(id)
);

CREATE TABLE sales (
	id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	userId int NOT NULL,
	productId int NOT NULL,
	clientId int NOT NULL,
	discount float DEFAULT 0.00,
	price float NOT NULL,
	paid float NOT NULL,
	active SMALLINT NOT NULL DEFAULT 0,
	createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	FOREIGN KEY (userId) REFERENCES users(id),
	FOREIGN KEY (productId) REFERENCES products(id),
	FOREIGN KEY (clientId) REFERENCES clients(id)
);

CREATE TABLE schedules (
	id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	userId int NOT NULL,
	clientId int NOT NULL,
	name varchar(255) NOT NULL,
	description varchar(512),
	date TIMESTAMP,
	active SMALLINT NOT NULL DEFAULT 0,
	createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	FOREIGN KEY (userId) REFERENCES users(id),
	FOREIGN KEY (clientId) REFERENCES clients(id)
);
